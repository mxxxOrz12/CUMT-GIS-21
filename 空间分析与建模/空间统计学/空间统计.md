# 空间数据与空间统计



当我们拿到一份数据，我们应该干什么？

![image-20240312140013233](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240312140013233.png)



地理信息数据无处不在，也十分重要。

![image-20240312140256444](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240312140256444.png)

## 空间统计学

空间统计学：对空间数据的分布特征和分布模式进行识别和推断，以了解数据所蕴含的空间特性。



### 空间自相关

空间自相关是空间统计学中的一个重要的概念，当我们第一次听到它，不能理解它的具体含义。首先我们讲讲什么是**相关性**



**相关性**指的是两个或多个变量之间的关系程度

讲一个直白的例子，加入我们现在有一堆气温数据和冰淇淋销售数据，当发现气温上升时，冰淇淋的销量也增加，那我们可以说它们两个之间存在相关性。



那什么是自相关呢?

**自相关**也称序列相关，指的是同一序列在不同时间点上值的关系，自相关用于识别数据中的重复模式或周期趋势。

可以想象，如果你拿到某地区一个月的气温数据，可以发现，如果某一天的气温很高，而过去几天气温也很高，那么说明可能存在正自相关，反之则为负自相关。

![image-20240312152832194](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240312152832194.png)







好吧，铺垫了一下，那最后什么是空间自相关呢？

空间自相关是用于分析空间地理数据的概念，与上面说的自相关相似，但它关注的是空间上的关系，而不是时间。

**空间自相关描述的是在地理空间中，一个位置的属性值与其它周围位置属性值之间的相关性。**

举个例子，我们正在看一张展示城市犯罪率的地图，如果一个街道的犯罪率高，而且周围的街道犯罪率也高，那么地图上犯罪率数据呈现出正空间自相关，也就是相邻区域之间的犯罪率倾向相似，相反则呈现负空间自相关。



这样的例子还有很多很多，这也是为什么GIS作为一个工具很重要，如城市之间的GDP、人口、传染病的扩散等等。

![image-20240312153335864](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240312153335864.png)

在这张图中我们可以看到人口密度在地理空间上的分布，我们发现人口密度并不是随机分布的，越靠近城市中心，人口密度越高，而一些远离中心、交通不便的区域，人口密度可能就较低。



空间自相关解释

**正空间自相关**：如果城市中一个区域人口密度高，而且周围邻近区域人口密度也高，这表明人口密度在这个城市空间分布呈现出正的空间自相关。

**负空间自相关**：如果一个人口密度高的区域周围都是人口密度低的区域，则呈现负空间自相关。

**无空间自相关**：如果区域之间人口密度高低随机，无明显聚集趋势，则无空间自相关。

显然在人口密度这个例子中正空间自相关最为常见。



### 空间异质性

空间异质性指在空间分布上的不均匀性或不一致性，在不同的空间位置上，环境特征，资源分布、生物种群等方面的差异。

橘生淮南为橘，生于淮北为枳





我们举个最直白的例子：中国北方人平均身高高于南方人（无恶意），江浙沿海gdp高于西北地区，这背后有很深层次的原因，（自然环境因素、经济条件、遗传因素、文化和生活习惯），多种原因综合造成了某种属性在地理空间分布上的差异。

![image-20240325142526421](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325142526421.png)

观察左侧图我们可以看到，如果我们不区分数据的位置，进行回归分析，则得到密度和价格呈现正相关，下图区分了location1，location2，得到结果相反

全集和子集的关系，这一点十分重要，我们拿全市的房价进行拟合可能与实际结果相差较大，需要进行局部分析





![image-20240325144351178](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325144351178.png)

![image-20240325144453554](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325144453554.png)

![image-20240325144516591](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325144516591.png)

高斯核函数和指数核函数，权重随着距离增加而衰减，不等于0

下面三个核函数存在距离阈值，超过一定距离，权重为0



![image-20240325145110451](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325145110451.png)

在空间点分布不均匀的情况下，使用固定距离带宽，对b可能造成过拟合



![image-20240325145525313](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325145525313.png)

通过设定一个正整数N，对分析点周围的点进行限制，将距离分析点最远的点的距离作为带宽



![image-20240325145711449](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325145711449.png)

![image-20240325152819476](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325152819476.png)

![image-20240325204042705](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325204042705.png)

![image-20240325204935923](http://sa33v5v2e.hd-bkt.clouddn.com/image-20240325204935923.png)
